<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Metrics Widget â€“ Dev Example</title>
    <link rel="stylesheet" href="./widget.css" />
  </head>

  <body>
    <main>
      <h1>Metrics Widget (local dev)</h1>
      <p>This page mirrors the example embed used in the docs.</p>
      <div id="metrics-widget"></div>
    </main>

    <!-- Widget configuration -->
    <script type="application/json" id="operas-metrics-config">
{
  "settings": { "locale": "en" },
  "options": { "hide_initial_loading_screen": true },
  "tabs": [
    {
      "id": "sessions",
      "name": "Abstract Views",
      "order": 1,
      "scopes": {
        "book_sessions_ga": {
          "title": "Book views (Publisher site <July 2023)",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["up-ga/sessions"]
        },
        "book_sessions_up": {
          "title": "Book views (Publisher site >July 2023)",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["up-logs/sessions"],
          "startDate": "2023-07-01"
        },
        "book_sessions_figshare": {
          "title": "Book views (Figshare)",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["figshare/views"]
        },
        "book_sessions_uplo": {
          "title": "Book views (UPLO)",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["uplo/sessions"]
        },
        "book_sessions_google_books": {
          "title": "Book views (Google Books)",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["google-books/views"]
        },
        "chapter_sessions": {
          "title": "Chapter views (Publisher site >July 2023)",
          "works": [
            "info:doi:10.5334/bbd.a",
            "info:doi:10.5334/bbd.b",
            "info:doi:10.5334/bbd.c",
            "info:doi:10.5334/bbd.d",
            "info:doi:10.5334/bbd.e",
            "info:doi:10.5334/bbd.f",
            "info:doi:10.5334/bbd.g",
            "info:doi:10.5334/bbd.h",
            "info:doi:10.5334/bbd.i",
            "info:doi:10.5334/bbd.j",
            "info:doi:10.5334/bbd.k",
            "info:doi:10.5334/bbd.l",
            "info:doi:10.5334/bbd.m",
            "info:doi:10.5334/bbd.n",
            "info:doi:10.5334/bbd.o",
            "info:doi:10.5334/bbd.p",
            "info:doi:10.5334/bbd.q"
          ],
          "measures": ["up-logs/sessions"]
        },
        "chapter_sessions_figshare": {
          "title": "Chapter views (Figshare)",
          "works": [
            "info:doi:10.5334/bbd.a",
            "info:doi:10.5334/bbd.b",
            "info:doi:10.5334/bbd.c",
            "info:doi:10.5334/bbd.d",
            "info:doi:10.5334/bbd.e",
            "info:doi:10.5334/bbd.f",
            "info:doi:10.5334/bbd.g",
            "info:doi:10.5334/bbd.h",
            "info:doi:10.5334/bbd.i",
            "info:doi:10.5334/bbd.j",
            "info:doi:10.5334/bbd.k",
            "info:doi:10.5334/bbd.l",
            "info:doi:10.5334/bbd.m",
            "info:doi:10.5334/bbd.n",
            "info:doi:10.5334/bbd.o",
            "info:doi:10.5334/bbd.p",
            "info:doi:10.5334/bbd.q"
          ],
          "measures": ["figshare/views"]
        },
        "chapter_sessions_uplo": {
          "title": "Chapter views (UPLO)",
          "works": [
            "info:doi:10.5334/bbd.a",
            "info:doi:10.5334/bbd.b",
            "info:doi:10.5334/bbd.c",
            "info:doi:10.5334/bbd.d",
            "info:doi:10.5334/bbd.e",
            "info:doi:10.5334/bbd.f",
            "info:doi:10.5334/bbd.g",
            "info:doi:10.5334/bbd.h",
            "info:doi:10.5334/bbd.i",
            "info:doi:10.5334/bbd.j",
            "info:doi:10.5334/bbd.k",
            "info:doi:10.5334/bbd.l",
            "info:doi:10.5334/bbd.m",
            "info:doi:10.5334/bbd.n",
            "info:doi:10.5334/bbd.o",
            "info:doi:10.5334/bbd.p",
            "info:doi:10.5334/bbd.q"
          ],
          "measures": ["uplo/sessions"]
        },
        "chapter_sessions_google_books": {
          "title": "Chapter views (Google Books)",
          "works": [
            "info:doi:10.5334/bbd.a",
            "info:doi:10.5334/bbd.b",
            "info:doi:10.5334/bbd.c",
            "info:doi:10.5334/bbd.d",
            "info:doi:10.5334/bbd.e",
            "info:doi:10.5334/bbd.f",
            "info:doi:10.5334/bbd.g",
            "info:doi:10.5334/bbd.h",
            "info:doi:10.5334/bbd.i",
            "info:doi:10.5334/bbd.j",
            "info:doi:10.5334/bbd.k",
            "info:doi:10.5334/bbd.l",
            "info:doi:10.5334/bbd.m",
            "info:doi:10.5334/bbd.n",
            "info:doi:10.5334/bbd.o",
            "info:doi:10.5334/bbd.p",
            "info:doi:10.5334/bbd.q"
          ],
          "measures": ["google-books/views"]
        }
      },
      "graphs": [
        {
          "id": "line_graph",
          "type": "line",
          "title": "Views over time",
          "scopes": [
            "book_sessions_ga",
            "book_sessions_up",
            "book_sessions_figshare",
            "book_sessions_uplo",
            "book_sessions_google_books",
            "chapter_sessions",
            "chapter_sessions_figshare",
            "chapter_sessions_uplo",
            "chapter_sessions_google_books"
          ],
          "options": { "width": 100 },
          "config": { "stacked": true, "begin_at_zero": true }
        },
        {
          "id": "table",
          "type": "country_table",
          "scopes": [
            "book_sessions_ga",
            "book_sessions_up",
            "book_sessions_figshare",
            "book_sessions_uplo",
            "book_sessions_google_books",
            "chapter_sessions",
            "chapter_sessions_figshare",
            "chapter_sessions_uplo",
            "chapter_sessions_google_books"
          ],
          "options": { "width": 50 }
        },
        {
          "id": "map",
          "type": "world_map",
          "scopes": [
            "book_sessions_ga",
            "book_sessions_up",
            "book_sessions_figshare",
            "book_sessions_uplo",
            "book_sessions_google_books",
            "chapter_sessions",
            "chapter_sessions_figshare",
            "chapter_sessions_uplo",
            "chapter_sessions_google_books"
          ],
          "options": { "width": 50 }
        },
        {
          "class": "operas-definition-with-version",
          "graphs": [
            {
              "id": "operas_definition",
              "type": "text",
              "config": {
                "content": "OPERAS Definitions: <a href=\"https://metrics.operas-eu.org/up-ga/sessions/v1\">Views (Publisher site <July 2023)</a>, <a href=\"https://metrics.operas-eu.org/up-logs/sessions/v1\">Views (Publisher site >July 2023)</a>, <a href=\"https://metrics.operas-eu.org/figshare/views/v1\">Views (Figshare)</a>, <a href=\"https://metrics.operas-eu.org/uplo/sessions/v1\">Views (UPLO)</a>, <a href=\"https://metrics.operas-eu.org/google-books/views/v1\">Views (Google Books)</a>"
              },
              "options": { "width": 100, "class": "subtext" }
            }
          ]
        }
      ]
    },
    {
      "id": "downloads",
      "name": "Downloads",
      "order": 2,
      "scopes": {
        "book_downloads": {
          "title": "Book downloads (Publisher site <July 2023)",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["up-ga/downloads"]
        },
        "book_downloads_up": {
          "title": "Book downloads (Publisher site >July 2023)",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["up-logs/downloads"],
          "startDate": "2023-07-01"
        },
        "book_downloads_oapen": {
          "title": "Book downloads (OAPEN)",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["oapen/downloads"]
        },
        "book_downloads_figshare": {
          "title": "Book downloads (Figshare)",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["figshare/downloads"]
        },
        "book_downloads_uplo": {
          "title": "Book downloads (UPLO)",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["uplo/downloads"]
        },
        "chapter_downloads": {
          "title": "Chapter downloads (Publisher site >July 2023)",
          "works": [
            "info:doi:10.5334/bbd.a",
            "info:doi:10.5334/bbd.b",
            "info:doi:10.5334/bbd.c",
            "info:doi:10.5334/bbd.d",
            "info:doi:10.5334/bbd.e",
            "info:doi:10.5334/bbd.f",
            "info:doi:10.5334/bbd.g",
            "info:doi:10.5334/bbd.h",
            "info:doi:10.5334/bbd.i",
            "info:doi:10.5334/bbd.j",
            "info:doi:10.5334/bbd.k",
            "info:doi:10.5334/bbd.l",
            "info:doi:10.5334/bbd.m",
            "info:doi:10.5334/bbd.n",
            "info:doi:10.5334/bbd.o",
            "info:doi:10.5334/bbd.p",
            "info:doi:10.5334/bbd.q"
          ],
          "measures": ["up-logs/downloads"]
        },
        "chapter_downloads_figshare": {
          "title": "Chapter downloads (Figshare)",
          "works": [
            "info:doi:10.5334/bbd.a",
            "info:doi:10.5334/bbd.b",
            "info:doi:10.5334/bbd.c",
            "info:doi:10.5334/bbd.d",
            "info:doi:10.5334/bbd.e",
            "info:doi:10.5334/bbd.f",
            "info:doi:10.5334/bbd.g",
            "info:doi:10.5334/bbd.h",
            "info:doi:10.5334/bbd.i",
            "info:doi:10.5334/bbd.j",
            "info:doi:10.5334/bbd.k",
            "info:doi:10.5334/bbd.l",
            "info:doi:10.5334/bbd.m",
            "info:doi:10.5334/bbd.n",
            "info:doi:10.5334/bbd.o",
            "info:doi:10.5334/bbd.p",
            "info:doi:10.5334/bbd.q"
          ],
          "measures": ["figshare/downloads"]
        },
        "chapter_downloads_uplo": {
          "title": "Chapter downloads (UPLO)",
          "works": [
            "info:doi:10.5334/bbd.a",
            "info:doi:10.5334/bbd.b",
            "info:doi:10.5334/bbd.c",
            "info:doi:10.5334/bbd.d",
            "info:doi:10.5334/bbd.e",
            "info:doi:10.5334/bbd.f",
            "info:doi:10.5334/bbd.g",
            "info:doi:10.5334/bbd.h",
            "info:doi:10.5334/bbd.i",
            "info:doi:10.5334/bbd.j",
            "info:doi:10.5334/bbd.k",
            "info:doi:10.5334/bbd.l",
            "info:doi:10.5334/bbd.m",
            "info:doi:10.5334/bbd.n",
            "info:doi:10.5334/bbd.o",
            "info:doi:10.5334/bbd.p",
            "info:doi:10.5334/bbd.q"
          ],
          "measures": ["uplo/downloads"]
        }
      },
      "graphs": [
        {
          "id": "line_graph",
          "type": "line",
          "title": "Downloads over time",
          "scopes": [
            "book_downloads",
            "book_downloads_up",
            "chapter_downloads",
            "book_downloads_oapen",
            "book_downloads_uplo",
            "chapter_downloads_uplo",
            "book_downloads_figshare",
            "chapter_downloads_figshare"
          ],
          "options": { "width": 100 },
          "config": { "stacked": true, "begin_at_zero": true }
        },
        {
          "id": "table",
          "type": "country_table",
          "scopes": [
            "book_downloads",
            "book_downloads_oapen",
            "book_downloads_up",
            "book_downloads_figshare",
            "book_downloads_uplo",
            "chapter_downloads",
            "chapter_downloads_figshare",
            "chapter_downloads_uplo"
          ],
          "options": { "width": 50 }
        },
        {
          "id": "map",
          "type": "world_map",
          "scopes": [
            "book_downloads",
            "book_downloads_oapen",
            "book_downloads_up",
            "book_downloads_figshare",
            "book_downloads_uplo",
            "chapter_downloads",
            "chapter_downloads_figshare",
            "chapter_downloads_uplo"
          ],
          "options": { "width": 50 }
        },
        {
          "id": "operas_definition",
          "type": "text",
          "config": {
            "content": "OPERAS Definitions: <a href=\"https://metrics.operas-eu.org/up-ga/downloads/v1\">Downloads (Publisher site <July 2023)</a>, <a href=\"https://metrics.operas-eu.org/up-logs/downloads/v1\">Downloads (Publisher site >July 2023)</a>, <a href=\"https://metrics.operas-eu.org/oapen/downloads/v1\">Downloads (OAPEN)</a>, <a href=\"https://metrics.operas-eu.org/figshare/downloads/v1\">Downloads (Figshare)</a>, <a href=\"https://metrics.operas-eu.org/uplo/downloads/v1\">Downloads (UPLO)</a>"
          },
          "options": { "width": 100, "class": "subtext" }
        }
      ]
    },
    {
      "id": "reads",
      "name": "Reads",
      "order": 3,
      "scopes": {
        "reads_ga": {
          "title": "Book reads (Publisher site <July 2023)",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["up-ga/reads"]
        },
        "reads_up": {
          "title": "Book reads (Publisher site >July 2023)",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["up-logs/reads"],
          "startDate": "2023-07-01"
        },
        "reads_uplo": {
          "title": "Book reads (UPLO)",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["uplo/reads"]
        },
        "reads_google_books": {
          "title": "Book reads (Google Books)",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["google-books/reads"]
        }
      },
      "graphs": [
        {
          "id": "line_graph",
          "type": "line",
          "title": "Reads over time",
          "scopes": [
            "reads_ga",
            "reads_up",
            "reads_uplo",
            "reads_google_books"
          ],
          "options": { "width": 100 },
          "config": { "stacked": true, "begin_at_zero": true }
        },
        {
          "id": "table",
          "type": "country_table",
          "scopes": [
            "reads_ga",
            "reads_up",
            "reads_uplo",
            "reads_google_books"
          ],
          "options": { "width": 50 }
        },
        {
          "id": "map",
          "type": "world_map",
          "scopes": [
            "reads_ga",
            "reads_up",
            "reads_uplo",
            "reads_google_books"
          ],
          "options": { "width": 50 }
        },
        {
          "id": "operas_definition",
          "type": "text",
          "config": {
            "content": "OPERAS Definitions: <a href=\"https://metrics.operas-eu.org/up-logs/reads/v1\">Reads (Publisher site >July 2023)</a>, <a href=\"https://metrics.operas-eu.org/up-ga/reads/v1\">Reads (Publisher site <July 2023)</a>, <a href=\"https://metrics.operas-eu.org/uplo/reads/v1\">Reads (UPLO)</a>, <a href=\"https://metrics.operas-eu.org/google-books/reads/v1\">Reads (Google Books)</a>"
          },
          "options": { "width": 100, "class": "subtext" }
        }
      ]
    },
    {
      "id": "annotations",
      "name": "Annotations",
      "order": 4,
      "scopes": {
        "hypothesis": {
          "title": "Hypothesis",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["hypothesis/annotations"]
        }
      },
      "graphs": [
        {
          "id": "line_graph",
          "type": "line",
          "title": "Annotations over time",
          "scopes": ["hypothesis"],
          "options": { "width": 100 },
          "config": { "stacked": true, "begin_at_zero": true }
        },
        {
          "id": "hypothesis_table",
          "type": "hypothesis_table",
          "title": "Hypothesis annotations",
          "scopes": ["annotations"],
          "options": { "width": 100 }
        },
        {
          "id": "operas_definition",
          "type": "text",
          "config": {
            "content": "OPERAS Definitions: <a href=\"https://metrics.operas-eu.org/hypothesis/annotations/v1\">Annotations</a>"
          },
          "options": { "width": 100, "class": "subtext" }
        }
      ]
    },
    {
      "id": "citations",
      "name": "Citations",
      "order": 5,
      "scopes": {
        "book_citations": {
          "title": "Book citations",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["crossref/citations"]
        },
        "chapter_citations": {
          "title": "Chapter citations",
          "works": [
            "info:doi:10.5334/bbd.a",
            "info:doi:10.5334/bbd.b",
            "info:doi:10.5334/bbd.c",
            "info:doi:10.5334/bbd.d",
            "info:doi:10.5334/bbd.e",
            "info:doi:10.5334/bbd.f",
            "info:doi:10.5334/bbd.g",
            "info:doi:10.5334/bbd.h",
            "info:doi:10.5334/bbd.i",
            "info:doi:10.5334/bbd.j",
            "info:doi:10.5334/bbd.k",
            "info:doi:10.5334/bbd.l",
            "info:doi:10.5334/bbd.m",
            "info:doi:10.5334/bbd.n",
            "info:doi:10.5334/bbd.o",
            "info:doi:10.5334/bbd.p",
            "info:doi:10.5334/bbd.q"
          ],
          "measures": ["crossref/citations"]
        }
      },
      "graphs": [
        {
          "id": "book_count",
          "type": "text",
          "scopes": ["book_citations"],
          "config": { "content": "<b>Book citations:</b> {book_citations}" },
          "options": { "width": 20, "class": "individual-source-label" }
        },
        {
          "id": "chapter_count",
          "type": "text",
          "scopes": ["chapter_citations"],
          "config": {
            "content": "<b>Chapter citations:</b> {chapter_citations}"
          },
          "options": { "width": 20, "class": "individual-source-label" }
        },
        {
          "id": "line_graph",
          "type": "line",
          "title": "Citations over time",
          "scopes": ["book_citations", "chapter_citations"],
          "options": { "width": 100 },
          "config": { "stacked": true, "begin_at_zero": true }
        },
        {
          "id": "operas_definition",
          "type": "text",
          "config": {
            "content": "OPERAS Definitions: <a href=\"https://metrics.operas-eu.org/crossref/citations/v1\">Citations</a>"
          },
          "options": { "width": 100, "class": "subtext" }
        }
      ]
    },
    {
      "id": "tweets",
      "name": "Tweets",
      "order": 6,
      "scopes": {
        "book_tweets": {
          "title": "Book tweets",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["twitter/tweets"]
        },
        "chapter_tweets": {
          "title": "Chapter tweets",
          "works": [
            "info:doi:10.5334/bbd.a",
            "info:doi:10.5334/bbd.b",
            "info:doi:10.5334/bbd.c",
            "info:doi:10.5334/bbd.d",
            "info:doi:10.5334/bbd.e",
            "info:doi:10.5334/bbd.f",
            "info:doi:10.5334/bbd.g",
            "info:doi:10.5334/bbd.h",
            "info:doi:10.5334/bbd.i",
            "info:doi:10.5334/bbd.j",
            "info:doi:10.5334/bbd.k",
            "info:doi:10.5334/bbd.l",
            "info:doi:10.5334/bbd.m",
            "info:doi:10.5334/bbd.n",
            "info:doi:10.5334/bbd.o",
            "info:doi:10.5334/bbd.p",
            "info:doi:10.5334/bbd.q"
          ],
          "measures": ["twitter/tweets"]
        }
      },
      "graphs": [
        {
          "id": "tweets-counts",
          "class": "class1 class2",
          "graphs": [
            {
              "id": "book_count",
              "type": "text",
              "scopes": ["book_tweets"],
              "config": { "content": "<b>Book tweets:</b> {book_tweets}" },
              "options": { "class": "individual-source-label" }
            },
            {
              "id": "chapter_count",
              "type": "text",
              "scopes": ["chapter_tweets"],
              "config": { "content": "<b>Chapter tweets:</b> {chapter_tweets}" },
              "options": { "class": "individual-source-label" }
            }
          ]
        },
        {
          "id": "line_graph",
          "type": "line",
          "title": "Tweets over time",
          "scopes": ["book_tweets", "chapter_tweets"],
          "options": { "width": 100 },
          "config": { "stacked": true, "begin_at_zero": true }
        },
        {
          "id": "operas_definition",
          "type": "text",
          "config": {
            "content": "OPERAS Definitions: <a href=\"https://metrics.operas-eu.org/twitter/tweets/v1\">Tweets</a>"
          },
          "options": { "width": 100, "class": "subtext" }
        }
      ]
    },
    {
      "id": "references",
      "name": "Online Media",
      "order": 7,
      "scopes": {
        "book_references_wordpress": {
          "title": "Book references (Wordpress)",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["wordpress/references"]
        },
        "book_references_wikipedia": {
          "title": "Book references (Wikipedia)",
          "works": ["info:doi:10.5334/bbd"],
          "measures": ["wikipedia/references"]
        },
        "chapter_references_wordpress": {
          "title": "Chapter references (Wordpress)",
          "works": [
            "info:doi:10.5334/bbd.a",
            "info:doi:10.5334/bbd.b",
            "info:doi:10.5334/bbd.c",
            "info:doi:10.5334/bbd.d",
            "info:doi:10.5334/bbd.e",
            "info:doi:10.5334/bbd.f",
            "info:doi:10.5334/bbd.g",
            "info:doi:10.5334/bbd.h",
            "info:doi:10.5334/bbd.i",
            "info:doi:10.5334/bbd.j",
            "info:doi:10.5334/bbd.k",
            "info:doi:10.5334/bbd.l",
            "info:doi:10.5334/bbd.m",
            "info:doi:10.5334/bbd.n",
            "info:doi:10.5334/bbd.o",
            "info:doi:10.5334/bbd.p",
            "info:doi:10.5334/bbd.q"
          ],
          "measures": ["wordpress/references"]
        },
        "chapter_references_wikipedia": {
          "title": "Chapter references (Wikipedia)",
          "works": [
            "info:doi:10.5334/bbd.a",
            "info:doi:10.5334/bbd.b",
            "info:doi:10.5334/bbd.c",
            "info:doi:10.5334/bbd.d",
            "info:doi:10.5334/bbd.e",
            "info:doi:10.5334/bbd.f",
            "info:doi:10.5334/bbd.g",
            "info:doi:10.5334/bbd.h",
            "info:doi:10.5334/bbd.i",
            "info:doi:10.5334/bbd.j",
            "info:doi:10.5334/bbd.k",
            "info:doi:10.5334/bbd.l",
            "info:doi:10.5334/bbd.m",
            "info:doi:10.5334/bbd.n",
            "info:doi:10.5334/bbd.o",
            "info:doi:10.5334/bbd.p",
            "info:doi:10.5334/bbd.q"
          ],
          "measures": ["wikipedia/references"]
        }
      },
      "graphs": [
        {
          "id": "wikipedia_articles",
          "type": "list",
          "title": "Wikipedia Articles",
          "scopes": [
            "book_references_wikipedia",
            "chapter_references_wikipedia"
          ],
          "options": { "width": 50 },
          "config": { "name_regex": "([^/]+$)", "name_replacements": { "_": " " } }
        },
        {
          "id": "wordpress",
          "type": "list",
          "title": "Wordpress",
          "scopes": [
            "book_references_wordpress",
            "chapter_references_wordpress"
          ],
          "options": { "width": 50 },
          "config": { "name_regex": "([^/]+).$", "name_replacements": { "-": " " } }
        },
        {
          "id": "operas_definition",
          "type": "text",
          "config": {
            "content": "OPERAS Definitions: <a href=\"https://metrics.operas-eu.org/wikipedia/references/v1\">Wikipedia References</a>, <a href=\"https://metrics.operas-eu.org/wordpress/references/v1\">Wordpress References</a>"
          },
          "options": { "width": 100, "class": "subtext" }
        }
      ]
    }
  ]
}
    </script>

    <!-- Local (unminified) embed for dev -->
    <script>
      window.operaswidget = (id => {
        if (document.getElementById(id)) return widget;

        const script = document.createElement('script');
        script.id = id;
        script.src = './widget.js';
        document.body.appendChild(script);

        const widget = window.operaswidget || {};
        widget.eventQueue = [];
        widget.ready = f => {
          widget.eventQueue.push(f);
        };
        return widget;
      })('operas-metrics');
    </script>

    <!-- Simple event logging -->
    <script>
      operaswidget.ready(w => {
        w.events.on('widget_ready', tabs => {
          console.log('widget ready', tabs);
        });
        w.events.on('graph_ready', graph => {
          console.log('graph ready', graph.id);
        });
      });
    </script>

    <!-- Testing styles only -->
    <style>
      #metrics-widget {
        --color-primary: #506cd3;
        --color-primary-light: #edf0fb;
        --color-primary-dark: #506bd3;
        --color-line-graph-1: #506cd3;
        --color-line-graph-2: #f5a623;
        --color-world-map: #dbe1f6;
        --color-world-map-dark: #899de2;
      }
      body {
        margin: 0;
        padding: 20px;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
          Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      }
      a {
        color: #506cd3;
      }
      main {
        max-width: 960px;
        margin: 0 auto;
      }
    </style>
  </body>
</html>
